# WebDAV视频播放器 Demo

这是一个基于WebDAV协议的视频播放器演示应用，支持从云存储导入视频并进行流畅播放，同时提供详细的日志管理功能。

## 功能特点

### 🎬 视频播放功能
- 支持多种视频格式：MP4、WebM、OGG、MOV等
- HTML5视频播放器，支持标准播放控制
- 自动检测浏览器支持的视频格式
- 流式播放，支持大文件

### 📁 WebDAV文件管理
- 连接WebDAV服务器
- 浏览目录和文件
- 面包屑导航
- 文件类型识别和图标显示
- 文件大小格式化显示

### 📊 详细日志管理
- 多级日志记录（DEBUG、INFO、WARN、ERROR）
- 实时日志显示
- 日志本地存储
- 日志导出功能
- 记录所有操作和错误信息

### 🔧 错误处理
- 完善的错误捕获和处理
- 用户友好的错误提示
- 自动重试机制
- 详细的错误日志记录

## 使用方法

### 1. 打开应用
在浏览器中打开 `index.html` 文件。

### 2. 配置WebDAV连接
填写以下信息：
- **服务器地址**：WebDAV服务器的URL（如：`https://your-server.com/webdav`）
- **用户名**：登录用户名
- **密码**：登录密码
- **基础路径**：起始目录路径（默认为 `/`）

### 3. 连接服务器
点击"连接"按钮建立连接。连接状态会在页面顶部显示。

### 4. 浏览文件
连接成功后，可以：
- 点击文件夹进入子目录
- 使用面包屑导航快速跳转
- 查看文件信息（大小、类型等）

### 5. 播放视频
点击视频文件即可开始播放。支持的操作：
- 播放/暂停
- 音量控制
- 进度跳转
- 全屏播放

### 6. 查看日志
在页面底部的日志面板中可以：
- 查看实时日志信息
- 切换日志级别过滤
- 清空日志记录
- 导出日志文件

## 支持的WebDAV服务器

该应用理论上支持所有标准的WebDAV服务器，包括但不限于：

### 云存储服务
- **Nextcloud**：开源云存储平台
- **ownCloud**：企业云存储解决方案
- **Seafile**：文件同步和共享平台

### 网络存储设备
- **群晖NAS**：Synology DiskStation
- **威联通NAS**：QNAP NAS
- **FreeNAS**：开源NAS系统

### 其他WebDAV服务
- **Apache mod_dav**：Apache HTTP服务器WebDAV模块
- **nginx-dav-ext-module**：Nginx WebDAV扩展
- **IIS WebDAV**：Windows IIS WebDAV发布

## 故障排除

### 连接问题

#### 1. 连接超时
**问题**：无法连接到WebDAV服务器
**解决方案**：
- 检查服务器地址是否正确
- 确认网络连接正常
- 检查服务器是否启用了WebDAV
- 查看日志中的详细错误信息

#### 2. 认证失败
**问题**：用户名或密码错误
**解决方案**：
- 确认用户名和密码正确
- 检查账户是否有WebDAV访问权限
- 某些服务器可能需要应用专用密码

#### 3. CORS错误
**问题**：跨域请求被阻止
**解决方案**：
- 配置WebDAV服务器允许CORS
- 使用HTTPS协议
- 检查服务器CORS设置

### 播放问题

#### 1. 视频无法播放
**问题**：点击视频文件后无法播放
**解决方案**：
- 检查视频格式是否受支持
- 确认文件没有损坏
- 检查网络连接稳定性
- 查看浏览器控制台错误信息

#### 2. 播放卡顿
**问题**：视频播放不流畅
**解决方案**：
- 检查网络带宽
- 减少同时进行的网络活动
- 尝试较小的视频文件
- 检查服务器性能

#### 3. 音频问题
**问题**：有画面但没有声音
**解决方案**：
- 检查浏览器音频设置
- 确认视频文件包含音频轨道
- 检查系统音量设置

### 浏览器兼容性

#### 支持的浏览器
- **Chrome 80+**：完全支持
- **Firefox 75+**：完全支持
- **Safari 13+**：部分支持
- **Edge 80+**：完全支持

#### 已知限制
- **Safari**：某些WebDAV认证方式可能不支持
- **旧版浏览器**：可能不支持某些视频格式
- **移动浏览器**：可能有播放限制

## 调试工具

应用提供了内置的调试工具，可在浏览器控制台中使用：

```javascript
// 获取应用状态
debugApp.getStatus()

// 查看日志统计
debugApp.getLogStats()

// 获取所有日志
debugApp.getLogs()

// 清空日志
debugApp.clearLogs()

// 测试WebDAV连接
debugApp.testConnection()

// 获取视频播放状态
debugApp.getVideoState()
```

## 安全注意事项

1. **密码安全**：应用不会将密码保存到本地存储
2. **HTTPS推荐**：建议使用HTTPS连接以确保数据传输安全
3. **本地运行**：建议在本地环境运行，避免将凭据暴露给第三方
4. **日志隐私**：导出的日志可能包含敏感信息，请妥善保管

## 技术实现

### 核心技术
- **原生JavaScript**：无框架依赖
- **WebDAV客户端库**：webdav-client
- **HTML5 Video API**：视频播放
- **LocalStorage**：本地数据存储

### 架构设计
- **模块化设计**：各功能模块独立
- **事件驱动**：基于事件的组件通信
- **错误边界**：完善的错误处理机制
- **日志系统**：统一的日志管理

## 开发说明

### 文件结构
```
webdav-video-demo/
├── index.html      # 主页面
├── styles.css      # 样式文件
├── app.js         # 主应用逻辑
├── webdav-client.js # WebDAV客户端
├── video-player.js  # 视频播放器
├── logger.js       # 日志系统
└── README.md       # 说明文档
```

### 扩展功能
如需添加新功能，可以考虑：
- 播放列表支持
- 字幕文件支持
- 视频转码
- 缓存机制
- 离线播放

## 许可证

本项目为演示目的，仅供学习和参考使用。请根据实际需要调整和完善代码。